<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë…ë„ ì˜ìœ ê¶Œ ì—­ì‚¬ ì•„ì¹´ì´ë¸Œ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+KR:wght@400;700&family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        /* Chosen Palette: Warm Neutrals & Deep Ocean Blue */
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #fafaf9; /* stone-50 */
            color: #292524; /* stone-800 */
            scroll-behavior: smooth;
        }
        
        h1, h2, h3, .serif {
            font-family: 'Noto Serif KR', serif;
        }

        .chart-container {
            position: relative;
            width: 100%;
            max-width: 100%;
            height: 300px;
            margin: 0 auto;
        }

        /* Custom Scrollbar */
        .timeline-scroll::-webkit-scrollbar {
            width: 6px;
        }
        .timeline-scroll::-webkit-scrollbar-track {
            background: #e7e5e4;
        }
        .timeline-scroll::-webkit-scrollbar-thumb {
            background-color: #a8a29e;
            border-radius: 20px;
        }

        /* Timeline Connector Line */
        .timeline-line-left::before {
            content: '';
            position: absolute;
            top: 0;
            bottom: 0;
            left: 23px;
            width: 2px;
            background: #d6d3d1;
            z-index: 0;
        }
        
        .card-hover {
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        /* Interactive Active State (Highlight) */
        .card-active {
            border-color: #1e3a8a !important; /* blue-900 */
            background-color: #eff6ff !important; /* blue-50 */
            box-shadow: 0 0 0 2px rgba(30, 58, 138, 0.1), 0 10px 15px -3px rgba(0, 0, 0, 0.1) !important;
        }
        .card-active h3 {
            color: #1e3a8a !important;
        }
    </style>
    <!-- Application Structure Plan: 
         1. Header: Added Home Button linking to index.html.
         2. Interactive Dashboard: 
            - Doughnut Chart is now CLICKABLE. Clicking a slice filters the timeline below.
         3. Interactive Timeline: 
            - Cards are CLICKABLE. Clicking a card highlights it (focus mode).
         4. Navigation: Smooth scrolling interactions.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>
<body class="antialiased selection:bg-stone-200 selection:text-stone-900">

    <!-- Header Section -->
    <header class="bg-white border-b border-stone-200 sticky top-0 z-50 shadow-sm">
        <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">
            <div class="flex items-center gap-3">
                <div class="w-8 h-8 bg-blue-900 text-white flex items-center justify-center font-bold serif rounded">ë…</div>
                <h1 class="text-xl font-bold text-stone-900 tracking-tight hidden sm:block">ë…ë„ ì˜ìœ ê¶Œ ì•„ì¹´ì´ë¸Œ</h1>
                <h1 class="text-xl font-bold text-stone-900 tracking-tight sm:hidden">ë…ë„ ì•„ì¹´ì´ë¸Œ</h1>
            </div>
            
            <!-- Added Home Button -->
            <nav class="flex items-center gap-4">
                <a href="index.html" class="flex items-center gap-1.5 px-4 py-2 rounded-lg bg-stone-100 hover:bg-stone-200 text-stone-700 text-sm font-medium transition-colors group">
                    <span>ğŸ </span>
                    <span class="group-hover:text-stone-900">í™ˆìœ¼ë¡œ</span>
                </a>
            </nav>
        </div>
    </header>

    <main class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8">

        <!-- Intro Section -->
        <section class="mb-12 text-center max-w-3xl mx-auto">
            <h2 class="text-3xl sm:text-4xl font-bold text-stone-900 mb-4 serif">ì—­ì‚¬ì˜ ê¸°ë¡, ì§„ì‹¤ì˜ ì¦ëª…</h2>
            <p class="text-lg text-stone-600 leading-relaxed">
                ì¡°ì„  ì „ê¸°ë¶€í„° í˜„ëŒ€ê¹Œì§€ ë…ë„ ì˜ìœ ê¶Œì˜ ì—­ì‚¬ë¥¼ íƒìƒ‰í•˜ì„¸ìš”.<br>
                <span class="text-sm text-stone-400 mt-2 block">ğŸ’¡ íŒ: ì°¨íŠ¸ì˜ íŒŒì´ ì¡°ê°ì„ í´ë¦­í•˜ë©´ í•´ë‹¹ ê¸°ë¡ë§Œ ëª¨ì•„ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</span>
            </p>
        </section>

        <!-- Dashboard Section: Charts & Analytics -->
        <section class="mb-12">
            <div class="bg-white rounded-xl shadow border border-stone-200 p-6 sm:p-8">
                <div class="mb-6">
                    <h3 class="text-xl font-bold text-stone-800 flex items-center gap-2">
                        <span class="w-2 h-6 bg-blue-900 rounded-sm"></span>
                        ë°ì´í„°ë¡œ ë³´ëŠ” ì—­ì‚¬ì  íë¦„
                    </h3>
                    <p class="text-stone-500 text-sm mt-1">
                        ì™¼ìª½ ì°¨íŠ¸ì˜ ì˜ì—­ì„ í´ë¦­í•˜ë©´ í•˜ë‹¨ íƒ€ì„ë¼ì¸ì´ ìë™ìœ¼ë¡œ í•„í„°ë§ë©ë‹ˆë‹¤.
                    </p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 lg:gap-12">
                    <!-- Chart 1: Event Categories (Interactive) -->
                    <div class="flex flex-col">
                        <h4 class="text-sm font-semibold text-stone-500 uppercase tracking-wider mb-4 text-center">ê¸°ë¡ ë° ì‚¬ê±´ ìœ í˜• (í´ë¦­í•˜ì—¬ í•„í„°ë§)</h4>
                        <div class="chart-container cursor-pointer">
                            <canvas id="categoryChart"></canvas>
                        </div>
                    </div>

                    <!-- Chart 2: Timeline Density -->
                    <div class="flex flex-col">
                        <h4 class="text-sm font-semibold text-stone-500 uppercase tracking-wider mb-4 text-center">ì„¸ê¸°ë³„ ì£¼ìš” ì‚¬ê±´ ë°œìƒ ë¹ˆë„</h4>
                        <div class="chart-container">
                            <canvas id="timeChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Filter Controls -->
        <section class="mb-8 sticky top-20 z-40 bg-[#fafaf9]/95 backdrop-blur py-2 border-b border-stone-200" id="filterSection">
            <div class="flex flex-wrap gap-2 justify-center" id="filterContainer">
                <button onclick="filterTimeline('all')" class="filter-btn active px-4 py-2 rounded-full text-sm font-medium transition-colors bg-stone-800 text-white hover:bg-stone-700" data-filter="all">
                    ì „ì²´ ë³´ê¸°
                </button>
                <button onclick="filterTimeline('korea')" class="filter-btn px-4 py-2 rounded-full text-sm font-medium transition-colors bg-white border border-stone-300 text-stone-600 hover:bg-blue-50 hover:text-blue-700 hover:border-blue-200" data-filter="korea">
                    ğŸ‡°ğŸ‡· í•œêµ­ ì¸¡ ê¸°ë¡
                </button>
                <button onclick="filterTimeline('japan_evidence')" class="filter-btn px-4 py-2 rounded-full text-sm font-medium transition-colors bg-white border border-stone-300 text-stone-600 hover:bg-emerald-50 hover:text-emerald-700 hover:border-emerald-200" data-filter="japan_evidence">
                    ğŸ“œ ì¼ë³¸ì˜ ì¸ì •
                </button>
                <button onclick="filterTimeline('conflict')" class="filter-btn px-4 py-2 rounded-full text-sm font-medium transition-colors bg-white border border-stone-300 text-stone-600 hover:bg-red-50 hover:text-red-700 hover:border-red-200" data-filter="conflict">
                    âš ï¸ ë¶„ìŸ/ì¹¨íƒˆ
                </button>
                <button onclick="filterTimeline('international')" class="filter-btn px-4 py-2 rounded-full text-sm font-medium transition-colors bg-white border border-stone-300 text-stone-600 hover:bg-purple-50 hover:text-purple-700 hover:border-purple-200" data-filter="international">
                    âš–ï¸ êµ­ì œ ì¡°ì•½
                </button>
            </div>
        </section>

        <!-- Timeline Section -->
        <section class="relative min-h-[500px] timeline-line-left pl-2">
            
            <div id="timelineContainer" class="space-y-6 relative max-w-4xl">
                <!-- Timeline items will be injected here via JS -->
            </div>
            
            <div id="noDataMessage" class="hidden text-center py-20 text-stone-500">
                ì„ íƒí•œ ì¡°ê±´ì— ë§ëŠ” ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.
            </div>
        </section>

    </main>

    <footer class="bg-stone-900 text-stone-400 py-12 mt-20">
        <div class="max-w-6xl mx-auto px-4 text-center">
            <p class="mb-4 font-serif text-lg text-stone-200">ì—­ì‚¬ë¥¼ ìŠì€ ë¯¼ì¡±ì—ê²Œ ë¯¸ë˜ëŠ” ì—†ë‹¤</p>
            <p class="text-sm">Source Data: ë…ë„ ê´€ë ¨ ì£¼ìš” ì—­ì‚¬ ì—°í‘œ (ì„¸ì¢…ì‹¤ë¡ì§€ë¦¬ì§€ ~ 2011 ì¼ë³¸ êµê³¼ì„œ ì™œê³¡)</p>
            <div class="mt-8">
                <a href="index.html" class="inline-block px-6 py-2 border border-stone-700 rounded hover:bg-stone-800 transition-colors text-sm">í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸°</a>
            </div>
        </div>
    </footer>

    <script>
        // --- DATA STORE ---
        const historyData = [
            { year: 1454, title: "ì„¸ì¢…ì‹¤ë¡ì§€ë¦¬ì§€", desc: "ìš°ì‚°(ë…ë„)ê³¼ ë¬´ë¦‰(ìš¸ë¦‰ë„)ì´ ê°•ì›ë„ ìš¸ì§„í˜„ì— ì†í•œë‹¤ê³  ê¸°ë¡. ë…ë„ê°€ ìš°ë¦¬ ë•…ì„ì„ ë°íŒ ìµœì´ˆì˜ ê´€ì°¬ ê¸°ë¡.", category: "korea" },
            { year: 1531, title: "ì‹ ì¦ë™êµ­ì—¬ì§€ìŠ¹ëŒ", desc: "ë…ë„ê°€ ì¡°ì„ ì˜ ì˜í† ì„ì„ ë°íˆëŠ” ê´€ì°¬ ì§€ë¦¬ì§€ í¸ì°¬.", category: "korea" },
            { year: 1667, title: "ì€ì£¼ì‹œì²­í•©ê¸°", desc: "ì¼ë³¸ ë—í† ë¦¬ë²ˆì˜ ë³´ê³ ì„œ. ìš¸ë¦‰ë„ì™€ ë…ë„ê°€ ì¼ë³¸ ì˜í†  ë°–(ì¡°ì„  ë•…)ì„ì„ ê¸°ë¡í•œ ì¼ë³¸ ë¬¸í—Œ.", category: "japan_evidence" },
            { year: 1693, title: "1ì°¨ ì•ˆìš©ë³µ ì‚¬ê±´", desc: "ì•ˆìš©ë³µì´ ì¼ë³¸ìœ¼ë¡œ ëŒë ¤ê°€ ë§‰ë¶€ì—ê²Œ ë…ë„ê°€ ì¡°ì„  ë•…ì„ì„ ê°•ë ¥íˆ ì£¼ì¥.", category: "korea" },
            { year: 1696, title: "2ì°¨ ì•ˆìš©ë³µ ì‚¬ê±´", desc: "ì•ˆìš©ë³µì´ ì¼ë³¸ì— ê±´ë„ˆê°€ í•­ì˜. ì¼ë³¸ ë§‰ë¶€ê°€ 'ìš¸ë¦‰ë„ ë„í•´ ê¸ˆì§€ë ¹'ì„ ë‚´ë¦¼.", category: "korea" },
            { year: 1785, title: "ì‚¼êµ­ì ‘ì–‘ì§€ë„", desc: "ì¼ë³¸ ì‹¤í•™ì í•˜ì•¼ì‹œ ì‹œí—¤ì´ ì œì‘. ë…ë„ë¥¼ ì¡°ì„ ìƒ‰(í™©ìƒ‰)ìœ¼ë¡œ ì¹ í•˜ê³  'ì¡°ì„ ì˜ ê²ƒ'ì´ë¼ í‘œê¸°.", category: "japan_evidence" },
            { year: 1877, title: "íƒœì •ê´€ ì§€ë ¹", desc: "ì¼ë³¸ ë©”ì´ì§€ ì •ë¶€ ìµœê³  í–‰ì •ê¸°ê´€ì´ 'ë…ë„ì™€ ìš¸ë¦‰ë„ëŠ” ì¼ë³¸ê³¼ ê´€ê³„ì—†ë‹¤'ê³  ê³µì‹ ì¸ì •. ê²°ì •ì ì¸ ì¦ê±°.", category: "japan_evidence" },
            { year: 1900, title: "ëŒ€í•œì œêµ­ ì¹™ë ¹ 41í˜¸", desc: "ê³ ì¢… í™©ì œê°€ ë…ë„ë¥¼ ìš¸ë¦‰êµ°ì˜ ê´€í•  êµ¬ì—­ìœ¼ë¡œ ëª…ì‹œí•˜ì—¬ ëŒ€ë‚´ì™¸ì— ê³µì‹ ë°˜í¬.", category: "korea" },
            { year: 1905, title: "ì‹œë§ˆë„¤í˜„ ê³ ì‹œ 40í˜¸", desc: "ì¼ë³¸ì´ ëŸ¬ì¼ì „ìŸ ì¤‘ ë…ë„ë¥¼ 'ë‹¤ì¼€ì‹œë§ˆ'ë¡œ ëª…ëª…í•˜ê³  ë¶ˆë²•ì ìœ¼ë¡œ ìêµ­ ì˜í† ë¡œ í¸ì….", category: "conflict" },
            { year: 1906, title: "ì‹¬í¥íƒ ë³´ê³ ì„œ", desc: "ìš¸ë¦‰êµ°ìˆ˜ ì‹¬í¥íƒì´ ë…ë„ê°€ ì¼ë³¸ì— í¸ì…ë˜ì—ˆë‹¤ëŠ” ì†Œì‹ì„ ë“£ê³  ì¤‘ì•™ ì •ë¶€ì— ë³´ê³ .", category: "korea" },
            { year: 1946, title: "SCAPIN ì œ677í˜¸", desc: "ì—°í•©êµ°ìµœê³ ì‚¬ë ¹ê´€ ì§€ë ¹. ë…ë„ë¥¼ ì¼ë³¸ì˜ í†µì¹˜ê¶Œ(í–‰ì •ê´€í•  êµ¬ì—­)ì—ì„œ ëª…ì‹œì ìœ¼ë¡œ ì œì™¸.", category: "international" },
            { year: 1951, title: "ìƒŒí”„ë€ì‹œìŠ¤ì½” ê°•í™”ì¡°ì•½", desc: "ì¼ë³¸ì´ í•œêµ­ì˜ ë…ë¦½ì„ ì¸ì •í–ˆìœ¼ë‚˜, ì¡°ë¬¸ì—ì„œ ë…ë„ ëª…ì‹œê°€ ëˆ„ë½ë˜ì–´ ë¶„ìŸì˜ ì”¨ì•—ì´ ë¨.", category: "international" },
            { year: 1952, title: "í‰í™”ì„  ì„ í¬", desc: "ì´ìŠ¹ë§Œ ëŒ€í†µë ¹ì´ ë…ë„ë¥¼ í¬í•¨í•œ ì¸ì ‘ í•´ì–‘ì— ëŒ€í•œ ì£¼ê¶Œì„ ì„ ì–¸.", category: "korea" },
            { year: 1953, title: "ë…ë„ì˜ìš©ìˆ˜ë¹„ëŒ€ í™œë™", desc: "í™ìˆœì¹  ë“± ë¯¼ê°„ì¸ë“¤ì´ ë…ë„ì— ìƒì£¼í•˜ë©° ì¼ë³¸ì˜ ì¹¨ë²”ì„ ë§‰ê³  ì‹¤íš¨ì  ì§€ë°° ê°•í™”.", category: "korea" },
            { year: 1965, title: "í•œì¼ê¸°ë³¸ì¡°ì•½", desc: "ë…ë„ ë¬¸ì œë¥¼ êµ¬ì²´ì ìœ¼ë¡œ ì–¸ê¸‰í•˜ì§€ ì•Šê³  ë´‰í•©í•˜ì—¬ ì´í›„ ê°ˆë“±ì˜ ë¶ˆì”¨ê°€ ë¨.", category: "international" },
            { year: 1998, title: "ì‹ í•œì¼ì–´ì—…í˜‘ì •", desc: "ë…ë„ê°€ í•œì¼ ì¤‘ê°„ìˆ˜ì—­ì— í¬í•¨ë˜ë©´ì„œ ì˜ìœ ê¶Œ ë° ì–´ì—…ê¶Œ ê´€ë ¨ ë…¼ë€ ë°œìƒ.", category: "conflict" },
            { year: 2005, title: "ë‹¤ì¼€ì‹œë§ˆì˜ ë‚  ì œì •", desc: "ì¼ë³¸ ì‹œë§ˆë„¤í˜„ ì˜íšŒê°€ 2ì›” 22ì¼ì„ 'ë‹¤ì¼€ì‹œë§ˆì˜ ë‚ 'ë¡œ ì œì •í•˜ëŠ” ì¡°ë¡€ì•ˆ í†µê³¼.", category: "conflict" },
            { year: 2011, title: "ì¼ë³¸ êµê³¼ì„œ ì™œê³¡", desc: "ì¼ë³¸ ì¤‘í•™êµ ì‚¬íšŒê³¼ êµê³¼ì„œ 14ì¢…ì— ë…ë„ ì˜ìœ ê¶Œ ì£¼ì¥ì´ ê¸°ìˆ ë¨.", category: "conflict" }
        ];

        // --- CONFIG ---
        const categoryConfig = {
            'korea': { label: 'í•œêµ­ ì¸¡ ê¸°ë¡', color: 'bg-blue-900', text: 'text-blue-900', border: 'border-blue-200', bgLight: 'bg-blue-50', icon: 'ğŸ‡°ğŸ‡·' },
            'japan_evidence': { label: 'ì¼ë³¸ì˜ ì¸ì •', color: 'bg-emerald-600', text: 'text-emerald-700', border: 'border-emerald-200', bgLight: 'bg-emerald-50', icon: 'ğŸ“œ' },
            'conflict': { label: 'ë¶„ìŸ/ì¹¨íƒˆ', color: 'bg-red-600', text: 'text-red-700', border: 'border-red-200', bgLight: 'bg-red-50', icon: 'âš ï¸' },
            'international': { label: 'êµ­ì œ ì¡°ì•½', color: 'bg-purple-600', text: 'text-purple-700', border: 'border-purple-200', bgLight: 'bg-purple-50', icon: 'âš–ï¸' }
        };

        let categoryChartInstance = null;

        // --- CHART GENERATION ---
        
        function initCharts() {
            // Data Processing
            // The order here MUST match the data order for clicks to work correctly
            const categories = ['korea', 'japan_evidence', 'conflict', 'international'];
            const catCounts = { 'korea': 0, 'japan_evidence': 0, 'conflict': 0, 'international': 0 };
            const eraCounts = { '1400s': 0, '1500s': 0, '1600s': 0, '1700s': 0, '1800s': 0, '1900-1950': 0, '1951-Present': 0 };

            historyData.forEach(item => {
                catCounts[item.category]++;
                if(item.year < 1500) eraCounts['1400s']++;
                else if(item.year < 1600) eraCounts['1500s']++;
                else if(item.year < 1700) eraCounts['1600s']++;
                else if(item.year < 1800) eraCounts['1700s']++;
                else if(item.year < 1900) eraCounts['1800s']++;
                else if(item.year <= 1950) eraCounts['1900-1950']++;
                else eraCounts['1951-Present']++;
            });

            // 1. Interactive Doughnut Chart
            const ctxCat = document.getElementById('categoryChart').getContext('2d');
            categoryChartInstance = new Chart(ctxCat, {
                type: 'doughnut',
                data: {
                    labels: categories.map(k => categoryConfig[k].label),
                    datasets: [{
                        data: categories.map(k => catCounts[k]),
                        backgroundColor: ['#1e3a8a', '#059669', '#dc2626', '#9333ea'],
                        borderWidth: 0,
                        hoverOffset: 10
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    onClick: (e, activeElements) => {
                        if (activeElements.length > 0) {
                            const index = activeElements[0].index;
                            const selectedCategory = categories[index];
                            filterTimeline(selectedCategory);
                            // Visual feedback: scroll to timeline
                            document.getElementById('filterSection').scrollIntoView({ behavior: 'smooth', block: 'center' });
                        } else {
                            // Clicking background resets filter
                            filterTimeline('all');
                        }
                    },
                    plugins: {
                        legend: { position: 'bottom', labels: { boxWidth: 12, padding: 15, font: { family: "'Noto Sans KR', sans-serif", size: 11 } } },
                        tooltip: { 
                            callbacks: { label: (ctx) => ` ${ctx.label}: ${ctx.raw}ê±´ (í´ë¦­í•˜ì—¬ ë³´ê¸°)` },
                            backgroundColor: 'rgba(30, 30, 30, 0.9)',
                            padding: 10
                        }
                    }
                }
            });

            // 2. Timeline Density Chart (Bar)
            const ctxTime = document.getElementById('timeChart').getContext('2d');
            new Chart(ctxTime, {
                type: 'bar',
                data: {
                    labels: Object.keys(eraCounts),
                    datasets: [{
                        label: 'ì‚¬ê±´ ìˆ˜',
                        data: Object.values(eraCounts),
                        backgroundColor: '#d6d3d1',
                        hoverBackgroundColor: '#1e3a8a',
                        borderRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: { beginAtZero: true, grid: { display: true, color: '#f5f5f4' } },
                        x: { grid: { display: false } }
                    },
                    plugins: { legend: { display: false } }
                }
            });
        }

        // --- TIMELINE RENDERING ---

        function renderTimeline(filter = 'all') {
            const container = document.getElementById('timelineContainer');
            const noData = document.getElementById('noDataMessage');
            container.innerHTML = '';

            const filteredData = filter === 'all' ? historyData : historyData.filter(item => item.category === filter);

            if (filteredData.length === 0) {
                noData.classList.remove('hidden');
                return;
            } else {
                noData.classList.add('hidden');
            }

            filteredData.forEach((item) => {
                const config = categoryConfig[item.category];
                
                const cardHtml = `
                    <div class="relative pl-12 sm:pl-16 group" onclick="toggleHighlight(this)">
                        <!-- Dot -->
                        <div class="absolute left-[15px] top-6 w-4 h-4 rounded-full border-2 border-white shadow z-10 flex items-center justify-center ${config.color}"></div>

                        <!-- Card -->
                        <div class="card-hover bg-white p-5 sm:p-6 rounded-lg border ${config.border} shadow-sm relative transition-all duration-300 w-full select-none">
                            <div class="flex flex-col sm:flex-row sm:items-center justify-between mb-3 gap-2 pointer-events-none">
                                <span class="text-2xl sm:text-3xl font-bold text-stone-300 font-mono leading-none transition-colors">${item.year}</span>
                                <div class="inline-flex items-center gap-1.5 px-2.5 py-0.5 rounded-full text-xs font-semibold ${config.bgLight} ${config.text} w-fit">
                                    <span>${config.icon}</span>
                                    ${config.label}
                                </div>
                            </div>
                            <h3 class="text-lg sm:text-xl font-bold text-stone-900 mb-2 leading-tight pointer-events-none transition-colors">${item.title}</h3>
                            <p class="text-stone-600 text-sm leading-relaxed pointer-events-none">
                                ${item.desc}
                            </p>
                        </div>
                    </div>
                `;
                container.innerHTML += cardHtml;
            });
        }

        // --- INTERACTION FUNCTIONS ---

        function toggleHighlight(element) {
            // Find the card inner div
            const card = element.querySelector('.card-hover');
            
            // Toggle active class locally
            if(card.classList.contains('card-active')) {
                card.classList.remove('card-active');
            } else {
                // Remove active from all others first (Accordion style focus)
                document.querySelectorAll('.card-active').forEach(el => el.classList.remove('card-active'));
                card.classList.add('card-active');
            }
        }

        function filterTimeline(category) {
            // Update buttons visually
            document.querySelectorAll('.filter-btn').forEach(btn => {
                if(btn.dataset.filter === category) {
                    btn.classList.add('bg-stone-800', 'text-white');
                    btn.classList.remove('bg-white', 'text-stone-600');
                } else {
                    btn.classList.remove('bg-stone-800', 'text-white');
                    btn.classList.add('bg-white', 'text-stone-600');
                }
            });

            // Re-render
            renderTimeline(category);
        }

        document.addEventListener('DOMContentLoaded', () => {
            initCharts();
            renderTimeline('all');
        });

    </script>
</body>
</html>
